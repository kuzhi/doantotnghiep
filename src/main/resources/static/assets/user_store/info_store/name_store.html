<nav class="mt-3 mx-3" aria-label="breadcrumb">
	<ol class="breadcrumb">
		<li class="breadcrumb-item">{{titleBreadcrumb}}</li>
		<li class="breadcrumb-item active" aria-current="page">{{titleBread}} <b>{{nameStore}}</b> </li>
	</ol>
</nav>

<form name="nameStoreForm" class="row shadow-sm bg-second mx-3 py-3 rounded" novalidate>

	<div class="col-xl-12">
		<label class="form-label"> Logo cửa hàng <span class="text-red">*</span> </label>
		
		<div class="card mb-4 w-75 mx-auto">
			<div class="card-body text-center image-upload">
				<label for="file-input"> 
					<img
					class="img__store rounded-circle mb-2"
					src="/assets/images/default__image.png" 
					alt="Ảnh logo cửa hàng">
				</label>
				<div class="small font-italic text-muted mb-4">
					Ảnh có kích thước nhỏ hơn 10MB
				</div>
				<input id="file-input" type="file" />
			</div>
		</div>
	</div>

	<div class="col-xl-12">
		<div class="form-group"> 
			<label class="form-label"> Tên cửa hàng <span class="text-red">*</span> </label>
			<!-- Input -->
			<input ng-model="name" type="text" name="name" 
			class="form-control" placeholder="--Vui lòng nhập--" required> 
			
			<div ng-show="nameStoreForm.name.$dirty && nameStoreForm.name.$invalid">
				<small class="text-danger fst-italic" ng-show="nameStoreForm.name.$error.required">
					Vui lòng không để trống <b>*</b>
				</small>
			</div>
		</div> 
		<div class="form-group"> 
			<label class="form-label"> Số điện thoại <span class="text-red">*</span> </label>
			<!-- Input -->
			<input ng-model="phone" ng-pattern="regexPhone" type="number" name="phone" 
			class="form-control" placeholder="--Vui lòng nhập--" required> 
			
			<div ng-show="nameStoreForm.phone.$dirty && nameStoreForm.phone.$invalid || nameStoreForm.phone.$error.pattern">
				<small class="text-danger fst-italic" ng-show="nameStoreForm.phone.$error.pattern && nameStoreForm.phone.$invalid">
					Số điện thoại chưa phù hợp <b>*</b>
				</small> 
				<small class="text-danger fst-italic" ng-show="nameStoreForm.phone.$error.required">
					Vui lòng không để trống <b>*</b>
				</small>
			</div>
		</div> 
		<div class="form-group"> 
			<label class="form-label"> Địa chỉ <span class="text-red">*</span> </label>
			<!-- Input -->
			<input ng-model="address" type="text" name="address" 
			class="form-control" placeholder="--Vui lòng nhập--" required>
			
			<div ng-show="nameStoreForm.address.$dirty && nameStoreForm.address.$invalid">
				<small class="text-danger fst-italic" ng-show="nameStoreForm.address.$error.required">
					Vui lòng không để trống <b>*</b>
				</small>
			</div>
		</div> 
	</div>
	
	<div class="col-xl-12 text-start my-2">
		<button ng-disabled="nameStoreForm.$invalid" ng-click="update()" type="submit" class="btn__app">Lưu</button>
	</div>
</form>

<div class="row shadow-sm bg-second mx-3 my-2 py-3 rounded">
	<div class="d-flex justify-content-between">
		<h5 class="color-text">Gói dịch vụ</h5>

		<button ng-click="loadOrderPack()" type="button" class="btn btn-secondary btn-sm" 
		data-bs-toggle="modal" data-bs-target="#exampleModal">
			Lịch sử <i class="fas fa-laptop-medical"></i>
		</button>
	</div>

	<div class="container mt-2">
		<div class="row">
			<div ng-repeat="p in packs" class="col-xl-3">
				<div class="card" style="width: 18rem;">
					<img ng-src="/assets/images/sp1.jpg" alt="{{p.image}}"
						class="card-img-top">
					<div class="card-body">
						<h5 class="card-title color-text">{{p.name}}</h5>
						<span>Giá: {{p.price | currency:'':0}} đ</span> <br> <a
							href="#" class="btn btn-info w-100 mt-1 text-white fw-bold">Đăng
							ký ngay</a>
					</div>

				</div>
			</div>
		</div>
	</div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1"
	aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5 color-text" id="exampleModalLabel">Các gói đã sử dụng</h1>
				<button type="button" class="btn btn-danger btn-sm rounded-3" data-bs-dismiss="modal">
					<i class="fa-solid fa-xmark"></i>
				</button>
			</div>
			<div class="modal-body">

				<div class="row mt-3">
					<div class="table-responsive">
						<table class="table border text-nowrap text-md-nowrap table-hover mb-0">
							<thead class="table_primary">
								<tr>
									<th>Mã đăng kí gói</th>
									<th>Tên gói</th>
									<th>Giá</th>
									<th>Trạng thái</th>
									<th>Hành động</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="p in listOrderPack">
									<td>{{p.orderpackcode}}</td>
									<td>{{p.pack.name}}</td>
									<td class="text-end">{{p.pack.price | currency:'':0}} đ</td>
									<td>
										<div ng-if="p.status == 1" class="d-flex align-items-center">
											<div class="fade-loading bg-secondary me-2"></div>
											<p class="small text-secondary mb-0 fst-italic">Đang xử lý</p>
										</div>
										<div ng-if="p.status == 2" class="d-flex align-items-center">
											<div class="fade-loading bg-warning me-2"></div>
											<p class="small text-warning mb-0 fst-italic">Đã duyệt</p>
										</div>
										<div ng-if="p.status == 3" class="d-flex align-items-center">
											<div class="fade-loading bg-danger me-2"></div>
											<p class="small text-danger mb-0 fst-italic"> Bị hủy bởi <b>khách hàng</b> </p>
										</div>
										<div ng-if="p.status == 4" class="d-flex align-items-center">
											<div class="fade-loading bg-danger me-2"></div>
											<p class="small text-danger mb-0 fst-italic"> Bị hủy bởi <b>bạn</b> </p>
										</div>
									</td>
									<td class="text-center align-middle">
										<small ng-click="seemore(p.id)" class="btn_more"
											data-bs-toggle="modal" data-bs-target="#editModal">Xem thêm</small>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Modal -->
<div class="modal fade" id="editModal" tabindex="-1"
	aria-labelledby="editModal" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5 color-text" id="editModal">Chi tiết gói</h1>
			</div>
			<div class="modal-body">
				<form action="">
					<div class="mb-3 row">
						<label class="col-sm-4 col-5 col-form-label fw-bold">Mã đăng kí gói:</label>
						<div class="col-sm-8 col-7 col-form-label">
							<label>{{orderPackSee.orderpackcode}}</label>
						</div>
					</div>
					<!-- Tên -->
					<div class="mb-3 row">
						<label class="col-sm-3 col-3 col-form-label fw-bold">Tên gói:</label>
						<div class="col-sm-9 col-9 col-form-label">
							<label>{{orderPackSee.pack.name}}</label>
						</div>
					</div>
					<!-- Giá -->
					<div class="mb-3 row">
						<label for="price" class="col-sm-2 col-2 col-form-label fw-bold">Giá:</label>
						<div class="col-sm-10 col-10 col-form-label">
							<label>{{orderPackSee.pack.price | currency:'':0}} đ</label>
						</div>
					</div>
					<!-- Số ngày -->
					<div class="mb-3 row">
						<label for="date" class="col-sm-3 col-4 col-form-label fw-bold">Hiệu
							lực:</label>
						<div class="col-sm-9 col-8 col-form-label">
							<label>{{orderPackSee.pack.date | date: 'dd-MM-yyyy HH:mm:ss'}}</label>
						</div>
					</div>
					<!-- Ngày đăng ký -->
					<div class="mb-3 row">
						<label for="date" class="col-sm-4 col-5 col-form-label fw-bold">Ngày
							đăng ký:</label>
						<div class="col-sm-8 col-7 col-form-label">
							<label>{{orderPackSee.create_at | date: 'dd-MM-yyyy HH:mm:ss'}}</label>
						</div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
				<button ng-click="cancelOrderPack(orderPackSee.id)" ng-if="status == 1" type="button" class="btn btn-danger">
					Hủy gói
				</button>
			</div>
		</div>
	</div>
</div>